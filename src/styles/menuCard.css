.wii-card-wrap {
    position: relative;
    isolation: isolate; /* local stacking context per card */
    width: 100%;
    max-width: min(20rem, 24vw);
    justify-self: center;
    z-index: 0; /* baseline */
}

/* Elevate stacking when tooltip is visible */
.wii-card-wrap.tooltip-active {
    z-index: 50; /* above neighbors in same grid */
}

.wii-card {
    width: 100%;
    aspect-ratio: 18 / 10;
    height: auto;
    min-height: clamp(6rem, 12vw, 9rem);
    max-height: clamp(10rem, 16vw, 13rem);
    clip-path: inset(0 round clamp(35px, 3.8vw, 48px) / clamp(50px, 5vw, 68px));
    border-radius: clamp(38px, 4.2vw, 50px);
    background: linear-gradient(180deg, #f8f8f8 0%, #e9e9e9 100%);
    border: 1px solid rgba(255, 255, 255, 0.25);
    box-shadow: 0 1px 4px rgba(0, 0, 0, 0.25), inset 0 1px 0 rgba(255, 255, 255, 0.9), inset 0 -2px 3px rgba(0, 0, 0, 0.05);
    position: relative;
    overflow: hidden;
    transition: transform 0.15s ease, box-shadow 0.15s ease;
    align-self: start;
    box-sizing: border-box;
    cursor: url('../assets/imgs/user-cursor-med.png'), auto;
    z-index: 0;
}

.wii-card:hover {
    transform: scale(1.04);
    box-shadow: 0 6px 12px rgba(0, 0, 0, 0.25), inset 0 1px 0 rgba(255, 255, 255, 0.9), inset 0 -2px 3px rgba(0, 0, 0, 0.05);
}

.wii-card-inner {
    width: 100%;
    height: 100%;
    padding: 0;
    overflow: hidden;
    border-radius: inherit;
    display: flex;
    justify-content: center;
    align-items: center;
    background: radial-gradient(circle at top left, rgba(255,255,255,0.35), transparent 60%);
}

.wii-card-inner img {
    width: 100%;
    height: 100%;
    object-fit: cover;
    object-position: center;
    border-radius: inherit;
    display: block;
}

/* Tooltip styles */
.wii-card-tooltip {
    position: absolute;
    top: 100%; /* directly below card */
    left: 50%;
    transform: translateX(-50%);
    width: 90%; /* slightly less wide than card */
    margin-top: 10px;
    background: white;
    color: black;
    padding: clamp(8px, 1vw, 12px) clamp(10px, 1.2vw, 14px);
    border-radius: clamp(38px, 4.2vw, 50px);
    font-family: "Wii NTLG", Arial, sans-serif;
    font-size: clamp(13px, 1.2vw, 16px);
    font-weight: 400;
    text-align: center;
    white-space: nowrap;
    z-index: 2; /* above card within isolated context */
    pointer-events: none;
    box-shadow: 0 8px 16px rgba(0, 0, 0, 0.35);
    border: 1px solid rgba(0, 0, 0, 0.12);
    animation: tooltipFadeIn 0.2s ease-out;
    will-change: transform, opacity;
}

/* Fixed tooltip rendered to body via portal */
.wii-card-tooltip-fixed {
    position: fixed;
    transform: translateX(-50%);
    margin-top: 10px;
    background: white;
    color: black;
    padding: clamp(8px, 1vw, 12px) clamp(10px, 1.2vw, 14px);
    border-radius: clamp(38px, 4.2vw, 50px);
    font-family: "Wii NTLG", Arial, sans-serif;
    font-size: clamp(13px, 1.2vw, 16px);
    font-weight: 400;
    text-align: center;
    white-space: nowrap;
    z-index: 99999; /* above everything on page */
    pointer-events: none;
    box-shadow: 0 8px 16px rgba(0, 0, 0, 0.35);
    border: 1px solid rgba(0, 0, 0, 0.12);
    animation: tooltipFadeIn 0.2s ease-out;
}

@keyframes tooltipFadeIn {
    from {
        opacity: 0;
        transform: translateX(-50%) translateY(-5px);
    }
    to {
        opacity: 1;
        transform: translateX(-50%) translateY(0);
    }
}

/* Responsive adjustments */
@media (min-width: 1920px) {
    .wii-card-wrap { max-width: 24rem; }
}

@media (max-width: 1024px) {
    .wii-card-wrap { max-width: min(18rem, 30vw); }
}

@media (max-width: 768px) {
    .wii-card-wrap { max-width: 100%; }
}
